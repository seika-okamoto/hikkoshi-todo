{% extends 'base.html' %}

{% block content %}
<h2>ğŸ”— å…±æœ‰ã™ã‚‹é …ç›®</h2>

{% if tasks %}
  <ul>
    {% for task in tasks %}
      <li>ãƒ»{{ task.title }}</li>
    {% endfor %}
  </ul>

  <button id="copyBtn">ã“ã®å†…å®¹ã§å…±æœ‰</button>
{% else %}
  <p>æœªå®Œäº†ã®ã‚¿ã‚¹ã‚¯ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p>
{% endif %}

<p><a href="{% url 'todo:index' %}">å…±æœ‰ã‚’ã‚„ã‚ã¦æˆ»ã‚‹</a></p>

<script>
  document.getElementById('copyBtn')?.addEventListener('click', function() {
    const text = Array.from(document.querySelectorAll('li'))
                      .map(li => li.innerText)
                      .join('\n');
    navigator.clipboard.writeText(text).then(function() {
      alert('å…±æœ‰ç”¨ãƒ†ã‚­ã‚¹ãƒˆã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼');
    });
  });
</script>
{% endblock %}
