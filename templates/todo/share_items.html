{% extends 'base.html' %}

{% block content %}
<h2>🔗 共有する項目</h2>

{% if tasks %}
  <ul>
    {% for task in tasks %}
      <li>・{{ task.title }}</li>
    {% endfor %}
  </ul>

  <button id="copyBtn">この内容で共有</button>
{% else %}
  <p>未完了のタスクはありません。</p>
{% endif %}

<p><a href="{% url 'todo:index' %}">共有をやめて戻る</a></p>

<script>
  document.getElementById('copyBtn')?.addEventListener('click', function() {
    const text = Array.from(document.querySelectorAll('li'))
                      .map(li => li.innerText)
                      .join('\n');
    navigator.clipboard.writeText(text).then(function() {
      alert('共有用テキストをコピーしました！');
    });
  });
</script>
{% endblock %}
