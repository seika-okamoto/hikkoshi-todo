{% extends 'base.html' %}
{% load static %} 

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/home.css' %}">
{% endblock %}

{% block content %}
  <div class="header center-text">
    <h1>ã²ã£ã“ã—ToDo</h1>
  </div>
  <div class="user-info">
    <a href="{% url 'accounts:mypage' %}" class="mypage-link">ğŸ‘¤ ãƒã‚¤ãƒšãƒ¼ã‚¸</a>
  </div>

  <form method="post" class="center-text">
    {% csrf_token %}
    <label for="planned_move_date">ğŸ“… å¼•ã£è¶Šã—äºˆå®šæ—¥ã‚’é¸ã‚“ã§ãã ã•ã„ï¼š</label><br>
    <input type="date" name="planned_move_date" value="{{ planned_move_date }}">
    <button type="submit" class="btn home-page">âœ…ä¿å­˜</button>
  </form>

  <div class="progress-section center-text">
  {% if remaining_days is not None %}
    <h2 class="center-text">å¼•ã£è¶Šã—ã¾ã§ æ®‹ã‚Š {{ remaining_days }} æ—¥</h2>
    <div class="progress-bar-wrapper">
      <div class="progress-bar">
        <div class="progress-fill" style="width: {{ percent }}%;"></div>
      </div>
      <p>{{ percent }}%</p>
    </div>
  {% else %}
    <h2 class="center-text">ğŸ“… å¼•ã£è¶Šã—äºˆå®šæ—¥ãŒã¾ã è¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“</h2>
    <p>ToDoãƒªã‚¹ãƒˆã‚’å§‹ã‚ã‚‹ã«ã¯ã€ã¾ãšå¼•ã£è¶Šã—æ—¥ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚</p>
  {% endif %}
  </div>


  <h2 class="center-text">ğŸ“£ ãŠçŸ¥ã‚‰ã›</h2>
  <div class="notification center-text">
    {% if notification_tasks %}
     <ul>
      {% for item in notification_tasks %}
        <li class="{% if item.status == 'ä»Šæ—¥ãŒæœŸé™' %}today-deadline
                  {% elif 'æœŸé™åˆ‡ã‚Œ' in item.status %}expired
                  {% elif 'ã‚ã¨1æ—¥' in item.status %}one-day
                  {% elif 'ã‚ã¨' in item.status %}upcoming
                  {% else %}default{% endif %}">
          {{ item.task.title }} : {{ item.status }}
        </li>
      {% endfor %}
      </ul>
    {% else %}
      <p>ç¾åœ¨æœŸé™ã®è¿‘ã„ã‚¿ã‚¹ã‚¯ã¯ã‚ã‚Šã¾ã›ã‚“</p>
    {% endif %}
    {% if notification_all_count > 3 %}
  <p class="more-hint">ä»–ã«ã‚‚æœŸé™ãŒè¿«ã£ã¦ã„ã‚‹ã‚¿ã‚¹ã‚¯ãŒã‚ã‚Šã¾ã™ ğŸš¨</p>
    {% endif %}
  </div>

<div class="center-text">
<form action="/todo/" method="get">
  <button type="submit" class="btn home-page">ToDoãƒªã‚¹ãƒˆã‚’è¦‹ã‚‹</button>
</form>


</div>
{% endblock %}
