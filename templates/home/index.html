{% extends 'base.html' %}
{% load static %} 

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/home.css' %}">
{% endblock %}

{% block content %}
<<<<<<< HEAD
=======

>>>>>>> 2e61121 (fix: PythonAnywhereで一時的に編集した内容を保存)
  <div class="header center-text">
    <h1>ひっこしToDo</h1>
  </div>
  <div class="user-info">
    <a href="{% url 'accounts:mypage' %}" class="mypage-link">👤 マイページ</a>
  </div>

  <form method="post" class="center-text">
  {% csrf_token %}
  <label for="planned_move_date">📅 引っ越し予定日を選んでください：</label><br>
  <div class="date-row">
    <input type="date" name="planned_move_date" value="{{ planned_move_date }}">
    <button type="submit" class="btn save-btn">✅保存</button>
  </div>
</form>


<<<<<<< HEAD
  <div class="progress-section center-text">
=======
 <div class="progress-section center-text">
>>>>>>> 2e61121 (fix: PythonAnywhereで一時的に編集した内容を保存)
  {% if remaining_days is not None %}
    <h2 class="center-text">引っ越しまで 残り {{ remaining_days }} 日</h2>
    <div class="progress-bar-wrapper">
      <div class="progress-bar">
        <div class="progress-fill" style="width: {{ percent }}%;"></div>
      </div>
      <p>{{ percent }}%</p>
    </div>
  {% else %}
    <h2 class="center-text">📅 引っ越し予定日がまだ設定されていません</h2>
    <p>ToDoリストを始めるには、まず引っ越し日を入力してください。</p>
  {% endif %}
<<<<<<< HEAD
  </div>
=======
</div>
>>>>>>> 2e61121 (fix: PythonAnywhereで一時的に編集した内容を保存)


  <h2 class="center-text">📣 お知らせ</h2>
  <div class="notification center-text">
    {% if notification_tasks %}
     <ul>
      {% for item in notification_tasks %}
        <li class="{% if item.status == '今日が期限' %}today-deadline
                  {% elif '期限切れ' in item.status %}expired
                  {% elif 'あと1日' in item.status %}one-day
                  {% elif 'あと' in item.status %}upcoming
                  {% else %}default{% endif %}">
          {{ item.task.title }} : {{ item.status }}
        </li>
      {% endfor %}
      </ul>
    {% else %}
      <p>現在期限の近いタスクはありません</p>
    {% endif %}
    {% if notification_all_count > 3 %}
  <p class="more-hint">他にも期限が迫っているタスクがあります 🚨</p>
    {% endif %}
  </div>

<div class="center-text">
<form action="/todo/" method="get">
  <button type="submit" class="btn home-page">ToDoリストを見る</button>
</form>


</div>
{% endblock %}
