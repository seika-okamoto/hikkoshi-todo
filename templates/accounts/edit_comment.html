{% extends 'base.html' %}

{% block content %}
  <h2>ğŸ’¬ ã‚³ãƒ¡ãƒ³ãƒˆç·¨é›†ç”»é¢</h2>

  <form method="post">
    {% csrf_token %}

    <label for="{{ form.content.id_for_label }}">ğŸ§¡ ã‚³ãƒ¡ãƒ³ãƒˆå†…å®¹ï¼š</label><br>
    {{ form.content }}<br>
    <small><span id="char-count">0</span>/150æ–‡å­—</small>

    <br><br>

    <label>ğŸ‘¤ æŠ•ç¨¿è€…è¡¨ç¤ºè¨­å®šï¼š</label><br>
    {{ form.display_name }}<br>
  

    <button type="submit" name="save">âœ… ä¿å­˜</button>
    <button type="button" onclick="openModal()">ğŸ—‘ï¸ å‰Šé™¤</button>
  </form>

  <div id="deleteModal" class="modal">
  <div class="modal-content">
    <p>ã“ã®ã‚³ãƒ¡ãƒ³ãƒˆã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ</p>
    <form method="post" style="display:inline;">
      {% csrf_token %}
      <button type="submit" name="delete">å‰Šé™¤ã™ã‚‹</button>
    </form>
    <button onclick="closeModal()">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
  </div>
</div>
<style>
.modal {
  display: none;
  position: fixed;
  z-index: 999;
  left: 0; top: 0; width: 100%; height: 100%;
  background-color: rgba(0,0,0,0.5);
}
.modal-content {
  background: white;
  padding: 20px;
  margin: 20% auto;
  width: 300px;
  text-align: center;
  border-radius: 8px;
}
</style>
<script>
function openModal() {
  document.getElementById('deleteModal').style.display = 'block';
}
function closeModal() {
  document.getElementById('deleteModal').style.display = 'none';
}
</script>

  <p><a href="{% url 'accounts:comment_history' %}">æˆ»ã‚‹</a></p>

  <script>
    // æ–‡å­—æ•°ã‚«ã‚¦ãƒ³ãƒˆæ©Ÿèƒ½
    const textarea = document.getElementById('id_content');
    const charCount = document.getElementById('char-count');

    function updateCharCount() {
      charCount.textContent = textarea.value.length;
    }

    textarea.addEventListener('input', updateCharCount);
    window.addEventListener('DOMContentLoaded', updateCharCount);
  </script>
{% endblock %}
